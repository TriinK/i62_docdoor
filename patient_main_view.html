<!DOCTYPE html>
<html>
  <head>
    <title>Patient main view</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link href="resources/css/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>
    <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="files/patient_main_view/styles.css" type="text/css" rel="stylesheet"/>
    <script src="resources/scripts/jquery-1.7.1.min.js"></script>
    <script src="resources/scripts/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="resources/scripts/prototypePre.js"></script>
    <script src="data/document.js"></script>
    <script src="resources/scripts/prototypePost.js"></script>
    <script src="files/patient_main_view/data.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.2.0/respond.js"></script>
    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
      $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
      $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>
  </head>
  <body>
    <div id="base" class="">

      <!-- Unnamed (Rectangle) -->
      <div id="u17" class="ax_default disabled">
        <div id="u17_div" class="disabled"></div>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u18" class="ax_default image">
        <img id="u18_img" class="img " src="images/docdoor/u1.jpg"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u19" class="ax_default heading_3">
        <div id="u19_div" class=""></div>
        <div id="u19_text" class="text ">
          <p><span>appointment scanner</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u20" class="ax_default heading_3">
        <div id="u20_div" class=""></div>
        <div id="u20_text" class="text ">
          <p><span>help</span></p>
        </div>
      </div>

      <!-- Unnamed (Droplist) -->
      <div id="u21" class="ax_default droplist">
        <select id="u21_input">
          <option selected value="EE">EE</option>
          <option value="EN">EN</option>
          <option value="RU">RU</option>
        </select>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u22" class="ax_default box_3">
        <div id="u22_div" class=""></div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u23" class="ax_default heading_2">
        <div id="u23_div" class=""></div>
        <div id="u23_text" class="text ">
          <p><span>Günekoloogia</span></p>
        </div>
      </div>

      <!-- Serch märgi taust (Rectangle) -->
      <div id="u24" class="ax_default box_1" data-label="Serch märgi taust">
        <div id="u24_div" class=""></div>
      </div>

      <!-- Unnamed (Shape) -->
      <div id="u25" class="ax_default icon">
        <img id="u25_img" class="img " src="images/patient_main_view/u25.png"/>
      </div>

      <!-- Unnamed (Shape) -->
      <div id="u26" class="ax_default flow_shape">
        <img id="u26_img" class="img " src="images/patient_main_view/u26.png"/>
      </div>

      <!-- Unnamed (Shape) -->
      <div id="u27" class="ax_default flow_shape">
        <img id="u27_img" class="img " src="images/patient_main_view/u27.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u28" class="ax_default heading_2">
        <div id="u28_div" class=""></div>
        <div id="u28_text" class="text ">
          <p><span>L 29. sept</span></p>
        </div>
      </div>

      <!-- Unnamed (Radio Button) -->
      <div id="u31" class="ax_default radio_button">
        <label for="u31_input" style="position: absolute; left: 0px;">
          <div id="u31_text" class="text ">
            <p><span>Tasulised</span></p>
          </div>
        </label>
        <input id="u31_input" type="radio" value="radio" name="u31"/>
      </div>

      <!-- Unnamed (Radio Button) -->
      <div id="u32" class="ax_default radio_button">
        <label for="u32_input" style="position: absolute; left: 0px;">
          <div id="u32_text" class="text ">
            <p><span>Tasuta</span></p>
          </div>
        </label>
        <input id="u32_input" type="radio" value="radio" name="u32"/>
      </div>

      <!-- Unnamed (Radio Button) -->
      <div id="u33" class="ax_default radio_button">
        <label for="u33_input" style="position: absolute; left: 0px;">
          <div id="u33_text" class="text ">
            <p><span>Saatekirjaga</span></p>
          </div>
        </label>
        <input id="u33_input" type="radio" value="radio" name="u33"/>
      </div>

      <!-- Unnamed (Droplist) -->
      <div id="u34" class="ax_default droplist">
        <select id="u34_input">
          <option selected value="   Varasemad enne">&nbsp;&nbsp; Varasemad enne</option>
          <option value="   Kallimad enne">&nbsp;&nbsp; Kallimad enne</option>
          <option value="   Odavamad enne">&nbsp;&nbsp; Odavamad enne</option>
        </select>
      </div>

      <!-- Unnamed (Droplist) -->
      <div id="u35" class="ax_default droplist">
        <select id="u35_input">
          <option value="    Tallinn">&nbsp;&nbsp;&nbsp; Tallinn</option>
          <option value="    Tartu">&nbsp;&nbsp;&nbsp; Tartu</option>
          <option selected value="    Kõik asukohad">&nbsp;&nbsp;&nbsp; Kõik asukohad</option>
        </select>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u36" class="ax_default heading_2">
        <div id="u36_div" class=""></div>
        <div id="u36_text" class="text ">
          <p><span>Sorteeri</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u37" class="ax_default heading_2">
        <div id="u37_div" class=""></div>
        <div id="u37_text" class="text ">
          <p><span>Asukoht</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u38" class="ax_default heading_2">
        <div id="u38_div" class=""></div>
        <span id="u38_text" class="text ">
          <script>document.getElementById("u38_text").value= length.toString() + "resultaati Odavamad enne";</script>
        </span>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u39" class="ax_default box_2">
        <div id="u39_div" class=""></div>
      </div>

      <!-- Unnamed (Vertical Line) -->
      <div id="u40" class="ax_default line">
        <img id="u40_img" class="img " src="images/patient_main_view/u40.png"/>
      </div>

      <!-- Unnamed (Vertical Line) -->
      <div id="u41" class="ax_default line">
        <img id="u41_img" class="img " src="images/patient_main_view/u40.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u42" class="ax_default best">
        <div id="u42_div" class=""></div>
        <div id="u42_text" class="text ">
          <p><span>Parim</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u43" class="ax_default date">
        <div id="u43_div" class=""></div>
        <div id="u43_text" class="text ">
          <p><span>L 29. sept</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u44" class="ax_default keskmine">
        <div id="u44_div" class=""></div>
        <div id="u44_text" class="text ">
          <p><span>Odavaim</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u45" class="ax_default keskmine">
        <div id="u45_div" class=""></div>
        <div id="u45_text" class="text ">
          <p><span>L 20. okt</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u46" class="ax_default best">
        <div id="u46_div" class=""></div>
        <div id="u46_text" class="text ">
          <p><span>Kiireim</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u47" class="ax_default date">
        <div id="u47_div" class=""></div>
        <div id="u47_text" class="text ">
          <p><span>L 29. sept</span></p>
        </div>
      </div>

      <!-- Unnamed (Horizontal Line) -->
      <div id="u48" class="ax_default bottom_line">
        <img id="u48_img" class="img " src="images/patient_main_view/u48.png"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u49" class="ax_default box_2">
        <table id="u62_ div" class="table table-striped" style="border-collapse:separate; border-spacing:0 15px; margin-top:-15px; border-radius: 25px;">
          <tbody id="appointment_list"></tbody>
        </table>
      </div>
    </div>
    <script>
        $( document ).ready(function() {
            giveMeAllAppointments();
        });

        function giveMeAllAppointments() {
            $.ajax(
                {
                    method: "GET",
                    url: "http://arstiaeg.aws.est.sise:8080/ajahaldus-rest-fhir/graafik/searchSlot?",
                    dataType: "json",
                    contentType: "application/json",
                    complete: function (response) {
                        if (response.status == '401') {
                            console.log("Unable to get response")
                        }
                        $('#appointment_list').empty();
                        var appointments = JSON.parse(response.responseText);
                        appointments = appointments.slottList;
                        var length = appointments.length
                        for (var i = 0; i < length; i++) {
                            if (appointments[i].asutusNimi == "Medicum") {
                                var row = "<tr style='margin-bottom:20px; background-color:white; box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.5);'>";
                                row = row + "<td>" + appointments[i].asutusNimi + '<br/>' + appointments[i].medTootajaNimi + "</td>";
                                row = row + "<td style='font-size: 20px'>" + appointments[i].startPaev + "</td>";
                                row = row + "<td style='font-size: 20px'>" + appointments[i].startAeg + "</td>";
                                row = row + "<td style='font-size: 20px'>" + '<span style="font-size: 20px; font-family: Archia-Regular, sans-serif;">69 \u20AC</span>' + "</td>";
                                row = row + '<td><button class="btn btn-success" id="btn-bs" onClick="sendTo()">Vali</button>&nbsp;</button></td>';
                                row = row + "</tr>";
                                $('#appointment_list').append(row);
                            } else {
                                var row = "<tr style='margin-top:20px; background-color:white; box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.5);'>";
                                row = row + "<td>" + '<img src="images/prillid.png" width="47" height="18"/>' + '<br/>' + appointments[i].medTootajaNimi +"</td>";
                                row = row + "<td style='font-size: 20px'>" + appointments[i].startPaev + "</td>";
                                row = row + "<td style='font-size: 20px'>" + appointments[i].startAeg + "</td>";
                                if (appointments[i].hind == null) {
                                    row = row + "<td style='font-size: 20px'>" + "</td>";
                                } else {
                                    row = row + "<td style='font-size: 20px'>" + appointments[i].hind + ' \u20AC' + "</td>";
                                }
                                row = row + '<td><button type="buton" class="btn btn-success" id="btn-bs" onClick=sendToBooking("booking.html")>Vali&nbsp;</button></td>';
                                row = row + "</tr>";
                                row = row + "</tr>";
                                $('#appointment_list').append(row);

                            }
                        }
                    }
                }
            );
        }
        function sendTo() {
            window.location.href = "https://www.medicum.ee/registratuur/";
        }

        function sendToNational() {
            window.location.href = "";
        }

        function sendToBooking(url) {
            newwindow=window.open(url,'name','height=700,width=700');
            if (window.focus) {newwindow.focus()}
            return false;
        }
    </script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.0-rc2/js/bootstrap.min.js"></script>
  </body>
</html>
